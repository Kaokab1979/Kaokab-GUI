<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>KAOKAB Ops Console</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="login-body">

  <div class="login-box">
    <img src="assets/kaokab-logo.png" class="login-logo" />
    <h1>KAOKAB Ops Console</h1>

    <input id="username" type="text" placeholder="Username" />
    <input id="password" type="password" placeholder="Password" />

    <button onclick="login()">Login</button>

    <div id="error" class="login-error"></div>
  </div>

  <script>
async function login() {
  const username = document.getElementById("username").value;
  const password = document.getElementById("password").value;
  const errorBox = document.getElementById("error");

  errorBox.textContent = "";

  try {
    const res = await fetch("/api/auth/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ username, password })
    });

    const data = await res.json();

    if (!data.ok) {
      errorBox.textContent = "Invalid username or password";
      return;
    }

    // Store JWT securely (Phase 1)
    localStorage.setItem("kaokab-token", data.token);

    // Redirect to dashboard
    window.location.href = "/";
  } catch (e) {
    errorBox.textContent = "Login failed";
  }
}
</script>


</body>
</html>
